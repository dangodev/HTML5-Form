$.fn.html5form=function(e){function s(e,n,i){$("#"+t.errorPrefix+"-"+e).length==0&&$(n).after('<div id="'+t.errorPrefix+"-"+e+'" class="'+t.errorClass+'">'+i+"</div>"),$(n).css(t.errorCSS).live("keyup change",function(){$(n).val().length>0&&($("#"+t.errorPrefix+"-"+e).hide(300).remove(),$(this).css(t.validCSS))}),r.push(n)}var t=$.extend({email:"Please enter a valid email address",empty:"Please fill out this field",errorClass:"error",errorCSS:{boxShadow:"0 0 4px #f20"},errorPrefix:"errormsg",validCSS:{boxShadow:"none"}},e),n=this,r=[],i=[];n.submit(function(){r=[],$(this).find("input[required=required], select[required=required], textarea[required=required]").each(function(e,n){switch($(this).attr("type")){case"email":var r=/^[-a-z0-9~!$%^&*_=+}{\'?]+(\.[-a-z0-9~!$%^&*_=+}{\'?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i;r.test($(this).val())||s(e,n,t.email);break;default:$(this).val().length==0&&s(e,n,t.empty)}});if(r.length>0)return $(r[0]).focus(),!1})}